import{a as C}from"./chunk-HKU4MGML.js";import{b as B,c as A,d as G,e as Y,f as J,g as Z}from"./chunk-3O3MEYGU.js";import{$ as h,$a as g,Bb as s,Dc as U,Ha as L,Hc as y,Ia as d,Kc as F,Lb as V,Oc as z,Pb as p,Pc as $,Qa as S,R as E,Sb as j,Wa as b,X as k,ca as R,dc as q,f as P,fa as l,fc as N,ga as m,nb as u,oa as D,ob as i,pb as r,qa as T,qb as _,ub as v,vb as x,xb as w,zb as c}from"./chunk-HNXX6TOF.js";import"./chunk-FDERIQAA.js";var f=class e{constructor(n,t){this.auth=n;this.router=t}canActivate(n,t){return this.auth.isAdmin()?!0:this.router.parseUrl("/login")}static \u0275fac=function(t){return new(t||e)(h(C),h(A))};static \u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"})};var Q=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",loadComponent:()=>import("./chunk-6S3BJKEB.js").then(e=>e.LoginComponent)},{path:"forgot-password",loadComponent:()=>import("./chunk-TTL45YEI.js").then(e=>e.ForgotPasswordComponent)},{path:"register",loadComponent:()=>import("./chunk-WEW5FHQB.js").then(e=>e.RegisterComponent)},{path:"inventory",loadComponent:()=>import("./chunk-OWJPMKD4.js").then(e=>e.InventoryListComponent)},{path:"admin/excel-upload",loadComponent:()=>import("./chunk-BTLKAT5Y.js").then(e=>e.ExcelUploadComponent)},{path:"devices/search",loadComponent:()=>import("./chunk-XEGJMTKR.js").then(e=>e.DeviceSearchComponent)},{path:"devices/:deviceId/history",loadComponent:()=>import("./chunk-CUCVK5FF.js").then(e=>e.DeviceHistoryComponent)},{path:"maintenance/request",loadComponent:()=>import("./chunk-ZIELJH2F.js").then(e=>e.MaintenanceRequestComponent)},{path:"admin/excel-upload",loadComponent:()=>import("./chunk-BTLKAT5Y.js").then(e=>e.ExcelUploadComponent),canActivate:[f]},{path:"admin/dashboard",loadComponent:()=>import("./chunk-ALSV6MCY.js").then(e=>e.DashboardComponent),canActivate:[f]},{path:"devices/:deviceId/history",loadComponent:()=>import("./chunk-CUCVK5FF.js").then(e=>e.DeviceHistoryComponent)},{path:"admin/all-requests",loadComponent:()=>import("./chunk-HVD7MXYW.js").then(e=>e.AllRequestsComponent)},{path:"admin/items/new",loadComponent:()=>import("./chunk-NP6S73X3.js").then(e=>e.ItemFormComponent),canActivate:[f]},{path:"admin/items/:id/edit",loadComponent:()=>import("./chunk-NP6S73X3.js").then(e=>e.ItemFormComponent),canActivate:[f]},{path:"**",redirectTo:"inventory"}];var O=class e{constructor(n){this.auth=n}intercept(n,t){let o=this.auth.getToken();if(o){let a=n.clone({setHeaders:{Authorization:`Bearer ${o}`}});return t.handle(a)}return t.handle(n)}static \u0275fac=function(t){return new(t||e)(h(C))};static \u0275prov=k({token:e,factory:e.\u0275fac})};var W={providers:[D(),N({eventCoalescing:!0}),J(Q),R($),{provide:z,useClass:O,multi:!0}]};function ne(e,n){e&1&&(v(0),i(1,"a",13),p(2,"Admin Dashboard"),r(),i(3,"a",14),p(4,"All Requests"),r(),i(5,"a",15),p(6,"Maintenance Request"),r(),x())}function oe(e,n){e&1&&(v(0),i(1,"a",15),p(2,"Maintenance Request"),r(),i(3,"a",14),p(4,"All Requests"),r(),x())}function ie(e,n){if(e&1&&(i(0,"nav",10)(1,"a",11),p(2,"Inventory"),r(),g(3,ne,7,0,"ng-container",12)(4,oe,5,0,"ng-container",12),r()),e&2){let t=s();d(3),u("ngIf",t.isAdmin),d(),u("ngIf",t.isAgency)}}function re(e,n){if(e&1){let t=w();v(0),i(1,"a",21),c("click",function(){l(t);let a=s(3);return m(a.closeDropdown())}),p(2,"Create Account"),r(),i(3,"a",22),c("click",function(){l(t);let a=s(3);return m(a.closeDropdown())}),p(4,"Forgot password?"),r(),x()}}function ae(e,n){if(e&1){let t=w();v(0),i(1,"p",18),p(2),r(),i(3,"button",19),c("click",function(){l(t);let a=s(2);return m(a.logout())}),p(4,"Logout"),r(),i(5,"a",20),c("click",function(){l(t);let a=s(2);return m(a.closeDropdown())}),p(6," Login with another ID "),r(),g(7,re,5,0,"ng-container",12),x()}if(e&2){let t=s(2);d(2),j("",t.user.username," (",t.user.role,")"),d(5),u("ngIf",t.isAdmin)}}function pe(e,n){if(e&1){let t=w();i(0,"a",20),c("click",function(){l(t);let a=s(2);return m(a.closeDropdown())}),p(1,"Login"),r(),i(2,"a",21),c("click",function(){l(t);let a=s(2);return m(a.closeDropdown())}),p(3,"Register"),r()}}function ce(e,n){if(e&1){let t=w();i(0,"div",16),c("click",function(a){return l(t),m(a.stopPropagation())}),g(1,ae,8,3,"ng-container",17)(2,pe,4,0,"ng-template",null,0,q),r()}if(e&2){let t=V(3),o=s();d(),u("ngIf",o.user)("ngIfElse",t)}}var I=class e{constructor(n,t){this.auth=n;this.router=t}dropdownOpen=!1;user=null;isAdmin=!1;isAgency=!1;destroy$=new P;ngOnInit(){this.auth.currentUser$.pipe(E(this.destroy$)).subscribe(t=>{this.user=t;let o=t?.role?.toUpperCase();this.isAdmin=o==="ADMIN",this.isAgency=o==="AGENCY"});let n=localStorage.getItem("currentUser");if(n&&!this.user){let t=JSON.parse(n);this.auth.setCurrentUser(t)}}toggleDropdown(n){n.stopPropagation(),this.dropdownOpen=!this.dropdownOpen}closeDropdown(){this.dropdownOpen=!1}logout(){this.auth.logout(),this.closeDropdown(),this.router.navigate(["/login"])}onDocumentClick(){this.dropdownOpen&&this.closeDropdown()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||e)(S(C),S(A))};static \u0275cmp=b({type:e,selectors:[["app-header"]],hostBindings:function(t,o){t&1&&c("click",function(){return o.onDocumentClick()},L)},decls:10,vars:2,consts:[["guestOptions",""],[1,"app-header"],[1,"logo-container"],["src","/logo.jfif","alt","Logo",1,"logo-img"],[1,"logo-text"],["class","nav",4,"ngIf"],[1,"auth"],[1,"profile",3,"click"],["src","/download.png","alt","Profile",1,"profile-icon"],["class","dropdown",3,"click",4,"ngIf"],[1,"nav"],["routerLink","/inventory","routerLinkActive","active"],[4,"ngIf"],["routerLink","/admin/dashboard","routerLinkActive","active"],["routerLink","/admin/all-requests","routerLinkActive","active"],["routerLink","/maintenance/request","routerLinkActive","active"],[1,"dropdown",3,"click"],[4,"ngIf","ngIfElse"],[1,"user-info"],[3,"click"],["routerLink","/login",1,"dropdown-link",3,"click"],["routerLink","/register",1,"dropdown-link",3,"click"],["routerLink","/forgot-password",1,"dropdown-link",3,"click"]],template:function(t,o){t&1&&(i(0,"header",1)(1,"div",2),_(2,"img",3),i(3,"div",4),p(4,"ICCC - Inventory Management System"),r()(),g(5,ie,5,2,"nav",5),i(6,"div",6)(7,"div",7),c("click",function(X){return o.toggleDropdown(X)}),_(8,"img",8),g(9,ce,4,2,"div",9),r()()()),t&2&&(d(5),u("ngIf",o.user),d(4),u("ngIf",o.dropdownOpen))},dependencies:[y,U,Z,G,Y],styles:[".app-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 20px;border-bottom:1px solid #eee;background-color:#122e52;box-shadow:0 1px 4px #00000014;position:relative;color:#fff}.logo-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.logo-img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;object-fit:cover}.logo-text[_ngcontent-%COMP%]{font-weight:600;font-size:2rem;font-family:Raleway;color:#fff}.nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-right:16px;text-decoration:none;color:#fff;transition:color .2s;font-size:1.2rem;font-family:Raleway}.nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:#00bfff;font-weight:600}.auth[_ngcontent-%COMP%]{position:relative}.profile[_ngcontent-%COMP%]{position:relative;cursor:pointer}.profile-icon[_ngcontent-%COMP%]{width:38px;height:38px;border-radius:50%;object-fit:cover;border:2px solid #ddd;background-color:#fff;transition:transform .1s ease-in}.profile-icon[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.dropdown[_ngcontent-%COMP%]{position:absolute;right:0;top:45px;background:#fff;border:1px solid #ddd;border-radius:6px;box-shadow:0 2px 10px #0000001a;min-width:170px;padding:8px;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .2s ease-in-out}.dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;width:100%;background:none;border:none;text-align:left;padding:6px 10px;cursor:pointer;border-radius:4px;color:#333;font-size:.95rem;transition:background .2s}.dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f1f1f1}.dropdown-link[_ngcontent-%COMP%]{display:block;width:100%;text-align:left;padding:6px 10px;cursor:pointer;border-radius:4px;transition:background .2s;color:#333;text-decoration:none;font-size:.95rem}.dropdown-link[_ngcontent-%COMP%]:hover{background:#f1f1f1}.user-info[_ngcontent-%COMP%]{font-weight:700;margin-bottom:8px;color:#333}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}"]})};var M=class e{title=T("inventory-management");static \u0275fac=function(t){return new(t||e)};static \u0275cmp=b({type:e,selectors:[["app-root"]],decls:3,vars:0,template:function(t,o){t&1&&(_(0,"app-header"),i(1,"main"),_(2,"router-outlet"),r())},dependencies:[y,B,I],styles:["[_nghost-%COMP%]{box-sizing:border-box}body[_ngcontent-%COMP%]{margin:0;font-family:Inter,system-ui,Arial,sans-serif}app-header[_ngcontent-%COMP%]{display:block}main[_ngcontent-%COMP%]{padding:16px;margin:0 auto}"]})};F(M,W).catch(e=>console.error(e));

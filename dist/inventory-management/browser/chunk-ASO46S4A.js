import{$ as n,A as o,Nc as m,X as s,m as p,q as a}from"./chunk-HNXX6TOF.js";var h=class l{constructor(t){this.http=t}getByAgency(t){throw new Error("Method not implemented.")}apiUrl="http://localhost:8080/api/devices";getAll(){return this.http.get(this.apiUrl).pipe(a(t=>t.map(e=>this.transformDevice(e))),o(t=>(console.error("Failed to load devices:",t),p([]))))}getById(t){return this.http.get(`${this.apiUrl}/${t}`).pipe(a(e=>this.transformDevice(e)),o(e=>(console.error(`Failed to fetch device ${t}:`,e),p(void 0))))}create(t){let e=this.transformToBackendFormat(t);return this.http.post(this.apiUrl,e).pipe(a(r=>this.transformDevice(r)),o(r=>{throw console.error("Failed to create device:",r),r}))}update(t,e){let r=this.transformToBackendFormat(e);return this.http.put(`${this.apiUrl}/${t}`,r).pipe(a(i=>this.transformDevice(i)),o(i=>{throw console.error(`Failed to update device ${t}:`,i),i}))}delete(t){return this.http.delete(`${this.apiUrl}/${t}`).pipe(o(e=>{throw console.error(`Failed to delete device ${t}:`,e),e}))}transformDevice(t){return{id:t.id,serialNumber:t.serialNumber,deviceType:t.deviceType,poles:t.poles,ecbPresent:t.ecbPresent,placeholder:t.placeholder,latitude:t.latitude,longitude:t.longitude,status:t.status,locationName:t.locationName,approachRoad:t.approachRoad,name:t.locationName,location:t.locationName,quantity:1,description:""}}transformToBackendFormat(t){return{serialNumber:t.serialNumber,deviceType:t.deviceType,poles:t.poles,ecbPresent:t.ecbPresent,placeholder:t.placeholder,latitude:t.latitude,longitude:t.longitude,status:t.status,locationName:t.locationName||t.location||t.name,approachRoad:typeof t.approachRoad=="string"?t.approachRoad?{name:t.approachRoad}:null:t.approachRoad}}static \u0275fac=function(e){return new(e||l)(n(m))};static \u0275prov=s({token:l,factory:l.\u0275fac,providedIn:"root"})};export{h as a};

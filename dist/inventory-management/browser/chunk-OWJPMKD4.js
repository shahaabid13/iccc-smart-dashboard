import{a as Xe}from"./chunk-ASO46S4A.js";import{a as ye}from"./chunk-HKU4MGML.js";import"./chunk-XT2DNTKZ.js";import"./chunk-D5LRABMA.js";import{a as j,b as D,c as G,d as Y}from"./chunk-CIT4JVC4.js";import{a as Ee,b as Le}from"./chunk-QZJLICHW.js";import{a as Ae}from"./chunk-SWU2EWNA.js";import{a as Fe,b as Re,c as Be,d as Ne,e as Ve,f as We,g as He,h as je,i as Ge,j as Ye,k as qe,l as Qe,m as $e}from"./chunk-QKMXXL45.js";import{c as be}from"./chunk-3O3MEYGU.js";import"./chunk-GG7DK3VL.js";import{A as ze,o as De,r as ee}from"./chunk-457EALQY.js";import{a as Ke,b as Ue}from"./chunk-QNMHJO7J.js";import{a as Pe,c as Me,f as we,g as Te,k as V}from"./chunk-WAO5ROTU.js";import{B as J,Q as W,S as ke,T as H,s as Ie}from"./chunk-I7RDOML2.js";import{c as Ce,g as Se,j as xe,t as Oe}from"./chunk-NJBGEMB6.js";import{$a as d,Bb as m,Cc as he,Dc as _e,Gc as fe,Hc as ve,Ia as s,Ka as U,Lb as N,Ob as Q,Pb as l,Qa as R,Qb as h,Rb as g,Ub as T,Vb as A,Wa as w,Wb as E,X as oe,Xa as B,Y as z,Zb as ue,_ as F,aa as C,ac as $,cc as X,dc as ge,f as ne,fa as v,ga as b,gb as ce,h as ae,ha as M,hb as S,ia as re,ib as I,ja as K,jb as P,kb as pe,lb as de,mb as me,nb as p,ob as n,oc as Z,pb as o,qb as y,qc as L,rc as k,ta as le,ua as se,ub as _,vb as f,xb as x,zb as u}from"./chunk-HNXX6TOF.js";import"./chunk-FDERIQAA.js";var it=new F("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{let t=C(K);return()=>ee(t)}});function nt(t){let i=C(K);return()=>ee(i)}var at={provide:it,deps:[],useFactory:nt};var Je=(()=>{class t{static \u0275fac=function(a){return new(a||t)};static \u0275mod=B({type:t});static \u0275inj=z({providers:[at],imports:[ze,D,J,De,D,J]})}return t})();function ot(t,i){if(t&1&&(n(0,"mat-option",17),l(1),o()),t&2){let e=i.$implicit;p("value",e),s(),g(" ",e," ")}}function rt(t,i){if(t&1){let e=x();n(0,"mat-form-field",14)(1,"mat-select",16,0),u("selectionChange",function(r){v(e);let c=m(2);return b(c._changePageSize(r.value))}),de(3,ot,2,2,"mat-option",17,pe),o(),n(5,"div",18),u("click",function(){v(e);let r=N(2);return b(r.open())}),o()()}if(t&2){let e=m(2);p("appearance",e._formFieldAppearance)("color",e.color),s(),p("value",e.pageSize)("disabled",e.disabled),ce("aria-labelledby",e._pageSizeLabelId),p("panelClass",e.selectConfig.panelClass||"")("disableOptionCentering",e.selectConfig.disableOptionCentering),s(2),me(e._displayedPageSizeOptions)}}function lt(t,i){if(t&1&&(n(0,"div",15),l(1),o()),t&2){let e=m(2);s(),h(e.pageSize)}}function st(t,i){if(t&1&&(n(0,"div",3)(1,"div",13),l(2),o(),I(3,rt,6,7,"mat-form-field",14),I(4,lt,2,1,"div",15),o()),t&2){let e=m();s(),S("id",e._pageSizeLabelId),s(),g(" ",e._intl.itemsPerPageLabel," "),s(),P(e._displayedPageSizeOptions.length>1?3:-1),s(),P(e._displayedPageSizeOptions.length<=1?4:-1)}}function ct(t,i){if(t&1){let e=x();n(0,"button",19),u("click",function(){v(e);let r=m();return b(r._buttonClicked(0,r._previousButtonsDisabled()))}),M(),n(1,"svg",8),y(2,"path",20),o()()}if(t&2){let e=m();p("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("disabled",e._previousButtonsDisabled())("tabindex",e._previousButtonsDisabled()?-1:null),S("aria-label",e._intl.firstPageLabel)}}function pt(t,i){if(t&1){let e=x();n(0,"button",21),u("click",function(){v(e);let r=m();return b(r._buttonClicked(r.getNumberOfPages()-1,r._nextButtonsDisabled()))}),M(),n(1,"svg",8),y(2,"path",22),o()()}if(t&2){let e=m();p("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("disabled",e._nextButtonsDisabled())("tabindex",e._nextButtonsDisabled()?-1:null),S("aria-label",e._intl.lastPageLabel)}}var q=(()=>{class t{changes=new ne;itemsPerPageLabel="Items per page:";nextPageLabel="Next page";previousPageLabel="Previous page";firstPageLabel="First page";lastPageLabel="Last page";getRangeLabel=(e,a,r)=>{if(r==0||a==0)return`0 of ${r}`;r=Math.max(r,0);let c=e*a,O=c<r?Math.min(c+a,r):c+a;return`${c+1} \u2013 ${O} of ${r}`};static \u0275fac=function(a){return new(a||t)};static \u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function dt(t){return t||new q}var mt={provide:q,deps:[[new le,new se,q]],useFactory:dt},ut=50;var gt=new F("MAT_PAGINATOR_DEFAULT_OPTIONS"),te=(()=>{class t{_intl=C(q);_changeDetectorRef=C(Z);_formFieldAppearance;_pageSizeLabelId=C(Ie).getId("mat-paginator-page-size-label-");_intlChanges;_isInitialized=!1;_initializedStream=new ae(1);color;get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max(e||0,0),this._changeDetectorRef.markForCheck()}_pageIndex=0;get length(){return this._length}set length(e){this._length=e||0,this._changeDetectorRef.markForCheck()}_length=0;get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max(e||0,0),this._updateDisplayedPageSizeOptions()}_pageSize;get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(a=>k(a,0)),this._updateDisplayedPageSizeOptions()}_pageSizeOptions=[];hidePageSize=!1;showFirstLastButtons=!1;selectConfig={};disabled=!1;page=new U;_displayedPageSizeOptions;initialized=this._initializedStream;constructor(){let e=this._intl,a=C(gt,{optional:!0});if(this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),a){let{pageSize:r,pageSizeOptions:c,hidePageSize:O,showFirstLastButtons:ie}=a;r!=null&&(this._pageSize=r),c!=null&&(this._pageSizeOptions=c),O!=null&&(this.hidePageSize=O),ie!=null&&(this.showFirstLastButtons=ie)}this._formFieldAppearance=a?.formFieldAppearance||"outline"}ngOnInit(){this._isInitialized=!0,this._updateDisplayedPageSizeOptions(),this._initializedStream.next()}ngOnDestroy(){this._initializedStream.complete(),this._intlChanges.unsubscribe()}nextPage(){this.hasNextPage()&&this._navigate(this.pageIndex+1)}previousPage(){this.hasPreviousPage()&&this._navigate(this.pageIndex-1)}firstPage(){this.hasPreviousPage()&&this._navigate(0)}lastPage(){this.hasNextPage()&&this._navigate(this.getNumberOfPages()-1)}hasPreviousPage(){return this.pageIndex>=1&&this.pageSize!=0}hasNextPage(){let e=this.getNumberOfPages()-1;return this.pageIndex<e&&this.pageSize!=0}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){let a=this.pageIndex*this.pageSize,r=this.pageIndex;this.pageIndex=Math.floor(a/e)||0,this.pageSize=e,this._emitPageEvent(r)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._isInitialized&&(this.pageSize||(this._pageSize=this.pageSizeOptions.length!=0?this.pageSizeOptions[0]:ut),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),this._displayedPageSizeOptions.indexOf(this.pageSize)===-1&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,a)=>e-a),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}_navigate(e){let a=this.pageIndex;e!==a&&(this.pageIndex=e,this._emitPageEvent(a))}_buttonClicked(e,a){a||this._navigate(e)}static \u0275fac=function(a){return new(a||t)};static \u0275cmp=w({type:t,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{color:"color",pageIndex:[2,"pageIndex","pageIndex",k],length:[2,"length","length",k],pageSize:[2,"pageSize","pageSize",k],pageSizeOptions:"pageSizeOptions",hidePageSize:[2,"hidePageSize","hidePageSize",L],showFirstLastButtons:[2,"showFirstLastButtons","showFirstLastButtons",L],selectConfig:"selectConfig",disabled:[2,"disabled","disabled",L]},outputs:{page:"page"},exportAs:["matPaginator"],decls:14,vars:14,consts:[["selectRef",""],[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","disabled","tabindex"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-previous",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-next",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","disabled","tabindex"],[1,"mat-mdc-paginator-page-size-label"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],[1,"mat-mdc-paginator-page-size-value"],["hideSingleSelectionIndicator","",3,"selectionChange","value","disabled","aria-labelledby","panelClass","disableOptionCentering"],[3,"value"],[1,"mat-mdc-paginator-touch-target",3,"click"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-first",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["matIconButton","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-last",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(a,r){a&1&&(n(0,"div",1)(1,"div",2),I(2,st,5,4,"div",3),n(3,"div",4)(4,"div",5),l(5),o(),I(6,ct,3,5,"button",6),n(7,"button",7),u("click",function(){return r._buttonClicked(r.pageIndex-1,r._previousButtonsDisabled())}),M(),n(8,"svg",8),y(9,"path",9),o()(),re(),n(10,"button",10),u("click",function(){return r._buttonClicked(r.pageIndex+1,r._nextButtonsDisabled())}),M(),n(11,"svg",8),y(12,"path",11),o()(),I(13,pt,3,5,"button",12),o()()()),a&2&&(s(2),P(r.hidePageSize?-1:2),s(3),g(" ",r._intl.getRangeLabel(r.pageIndex,r.pageSize,r.length)," "),s(),P(r.showFirstLastButtons?6:-1),s(),p("matTooltip",r._intl.previousPageLabel)("matTooltipDisabled",r._previousButtonsDisabled())("disabled",r._previousButtonsDisabled())("tabindex",r._previousButtonsDisabled()?-1:null),S("aria-label",r._intl.previousPageLabel),s(3),p("matTooltip",r._intl.nextPageLabel)("matTooltipDisabled",r._nextButtonsDisabled())("disabled",r._nextButtonsDisabled())("tabindex",r._nextButtonsDisabled()?-1:null),S("aria-label",r._intl.nextPageLabel),s(3),P(r.showFirstLastButtons?13:-1))},dependencies:[V,G,j,W,Qe],styles:[`.mat-mdc-paginator{display:block;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-paginator-container-text-color, var(--mat-sys-on-surface));background-color:var(--mat-paginator-container-background-color, var(--mat-sys-surface));font-family:var(--mat-paginator-container-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-paginator-container-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-paginator-container-text-size, var(--mat-sys-body-small-size));font-weight:var(--mat-paginator-container-text-weight, var(--mat-sys-body-small-weight));letter-spacing:var(--mat-paginator-container-text-tracking, var(--mat-sys-body-small-tracking));--mat-form-field-container-height: var(--mat-paginator-form-field-container-height, 40px);--mat-form-field-container-vertical-padding: var(--mat-paginator-form-field-container-vertical-padding, 8px)}.mat-mdc-paginator .mat-mdc-select-value{font-size:var(--mat-paginator-select-trigger-text-size, var(--mat-sys-body-small-size))}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap;width:100%;min-height:var(--mat-paginator-container-size, 56px)}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:var(--mat-paginator-page-size-select-width, 84px)}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px;fill:var(--mat-paginator-enabled-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button[aria-disabled] .mat-mdc-paginator-icon{fill:var(--mat-paginator-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}@media(forced-colors: active){.mat-mdc-icon-button[aria-disabled] .mat-mdc-paginator-icon,.mat-mdc-paginator-icon{fill:currentColor}.mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}.mat-mdc-paginator-range-actions .mat-mdc-icon-button[aria-disabled]{color:GrayText}}.mat-mdc-paginator-touch-target{display:var(--mat-paginator-touch-target-display, block);position:absolute;top:50%;left:50%;width:var(--mat-paginator-page-size-select-width, 84px);height:var(--mat-paginator-page-size-select-touch-target-height, 48px);background-color:rgba(0,0,0,0);transform:translate(-50%, -50%);cursor:pointer}
`],encapsulation:2,changeDetection:0})}return t})(),et=(()=>{class t{static \u0275fac=function(a){return new(a||t)};static \u0275mod=B({type:t});static \u0275inj=z({providers:[mt],imports:[H,Y,$e,te]})}return t})();var _t=()=>[10,25,50,100];function ft(t,i){if(t&1&&(n(0,"div",30)(1,"mat-card",31)(2,"mat-card-content")(3,"div",32)(4,"mat-icon",33),l(5,"devices"),o(),n(6,"div",34)(7,"div",35),l(8),o(),n(9,"div",36),l(10,"Total Devices"),o()()()()(),n(11,"mat-card",37)(12,"mat-card-content")(13,"div",32)(14,"mat-icon",33),l(15,"check_circle"),o(),n(16,"div",34)(17,"div",35),l(18),o(),n(19,"div",36),l(20,"Active"),o()()()()(),n(21,"mat-card",38)(22,"mat-card-content")(23,"div",32)(24,"mat-icon",33),l(25,"electric_bolt"),o(),n(26,"div",34)(27,"div",35),l(28),o(),n(29,"div",36),l(30,"Poles"),o()()()()(),n(31,"mat-card",39)(32,"mat-card-content")(33,"div",32)(34,"mat-icon",33),l(35,"security"),o(),n(36,"div",34)(37,"div",35),l(38),o(),n(39,"div",36),l(40,"ECB Present"),o()()()()()()),t&2){let e=m();s(8),h(e.items.length),s(10),h(e.getActiveDevicesCount()),s(10),h(e.getPolesCount()),s(10),h(e.getECBCount())}}function vt(t,i){if(t&1&&(n(0,"mat-option",40),l(1),o()),t&2){let e=i.$implicit;p("value",e),s(),g(" ",e," ")}}function bt(t,i){if(t&1&&(n(0,"mat-option",40),l(1),o()),t&2){let e=i.$implicit;p("value",e),s(),g(" ",e," ")}}function yt(t,i){if(t&1&&(n(0,"mat-option",40),l(1),o()),t&2){let e=i.$implicit;p("value",e),s(),g(" ",e," ")}}function Ct(t,i){t&1&&(n(0,"th",41),l(1,"Location Name"),o())}function St(t,i){if(t&1&&(n(0,"td",42),l(1),o()),t&2){let e=i.$implicit;s(),h(e.locationName||"N/A")}}function xt(t,i){t&1&&(n(0,"th",41),l(1,"Serial No."),o())}function Ot(t,i){if(t&1&&(n(0,"td",42),l(1),o()),t&2){let e=i.$implicit;s(),h(e.serialNumber||"N/A")}}function It(t,i){t&1&&(n(0,"th",41),l(1,"Device Type"),o())}function Pt(t,i){if(t&1&&(n(0,"td",42),l(1),o()),t&2){let e=i.$implicit;s(),h(e.deviceType||"N/A")}}function Mt(t,i){t&1&&(n(0,"th",41),l(1,"Status"),o())}function wt(t,i){if(t&1&&(n(0,"td",42)(1,"span"),l(2),o()()),t&2){let e=i.$implicit;s(),Q("status-badge status-"+((e.status==null?null:e.status.toLowerCase())||"unknown")),s(),g(" ",e.status||"Unknown"," ")}}function Tt(t,i){t&1&&(n(0,"th",41),l(1,"Poles"),o())}function At(t,i){if(t&1&&(n(0,"td",42),l(1),o()),t&2){let e=i.$implicit;s(),g(" ",e.poles?"Yes":"No"," ")}}function Et(t,i){t&1&&(n(0,"th",41),l(1,"ECB Present"),o())}function Lt(t,i){if(t&1&&(n(0,"td",42),l(1),o()),t&2){let e=i.$implicit;s(),g(" ",e.ecbPresent?"Yes":"No"," ")}}function kt(t,i){t&1&&(n(0,"th",41),l(1,"Approach Road"),o())}function Dt(t,i){if(t&1&&(n(0,"td",42),l(1),o()),t&2){let e=i.$implicit;s(),h(e.approachRoad||"N/A")}}function zt(t,i){t&1&&(n(0,"th",41),l(1,"Coordinates"),o())}function Ft(t,i){if(t&1&&(n(0,"div")(1,"small"),l(2),$(3,"number"),o(),y(4,"br"),n(5,"small"),l(6),$(7,"number"),o()()),t&2){let e=m().$implicit;s(2),g("Lat: ",X(3,2,e.latitude,"1.4-4")),s(4),g("Lng: ",X(7,5,e.longitude,"1.4-4"))}}function Rt(t,i){t&1&&(n(0,"span",45),l(1,"No coordinates"),o())}function Bt(t,i){if(t&1&&(n(0,"td",43),d(1,Ft,8,8,"div",44)(2,Rt,2,0,"ng-template",null,0,ge),o()),t&2){let e=i.$implicit,a=N(3);s(),p("ngIf",e.latitude&&e.longitude)("ngIfElse",a)}}function Nt(t,i){t&1&&(n(0,"th",41),l(1,"Actions"),o())}function Vt(t,i){if(t&1){let e=x();n(0,"td",42)(1,"button",47),u("click",function(){let r=v(e).$implicit,c=m(2);return b(c.edit(r.id))}),n(2,"mat-icon"),l(3,"edit"),o()(),n(4,"button",48),u("click",function(){let r=v(e).$implicit,c=m(2);return b(c.viewHistory(r.id))}),n(5,"mat-icon"),l(6,"history"),o()()()}}function Wt(t,i){t&1&&(_(0,46),d(1,Nt,2,0,"th",15)(2,Vt,7,0,"td",16),f())}function Ht(t,i){t&1&&y(0,"tr",49)}function jt(t,i){t&1&&y(0,"tr",50)}function Gt(t,i){if(t&1&&(n(0,"div",51),l(1),o()),t&2){let e=m();s(),g(" ",e.items.length===0?"Loading devices...":"No devices found matching your filters."," ")}}function Yt(t,i){if(t&1){let e=x();n(0,"mat-paginator",52),u("page",function(r){v(e);let c=m();return b(c.onPageChange(r))}),o()}if(t&2){let e=m();p("length",e.filteredItems.length)("pageSize",e.pageSize)("pageIndex",e.pageIndex)("pageSizeOptions",ue(4,_t))}}var tt=class t{constructor(i,e,a){this.inventory=i;this.router=e;this.auth=a}items=[];filteredItems=[];paginatedItems=[];query="";selectedLocation="";selectedType="";selectedStatus="";isAdmin=!1;displayedColumns=[];pageSize=10;pageIndex=0;pageSizeOptions=[10,25,50,100];deviceTypes=["ANPR","RLVD","PTZ","FIXED","ANALYTICAL"];statuses=["Installed","Active","Inactive","Maintenance"];ngOnInit(){this.loadInventory(),this.isAdmin=this.auth.isAdmin(),this.setDisplayedColumns()}loadInventory(){this.inventory.getAll().subscribe({next:i=>{this.items=i||[],this.applyFilters()},error:i=>{console.error("Error loading inventory:",i),this.items=[],this.filteredItems=[],this.updatePaginatedItems()}})}setDisplayedColumns(){let i=["locationName","serialNumber","deviceType","status","poles","ecbPresent","approachRoad","coordinates"];this.isAdmin?this.displayedColumns=[...i,"actions"]:this.displayedColumns=i}onFilterChange(){this.applyFilters()}resetFilters(){this.query="",this.selectedLocation="",this.selectedType="",this.selectedStatus="",this.pageIndex=0,this.applyFilters()}onPageChange(i){this.pageIndex=i.pageIndex,this.pageSize=i.pageSize,this.updatePaginatedItems()}applyFilters(){let i=(this.query||"").toLowerCase().trim();this.filteredItems=this.items.filter(e=>{let a=!i||(e.locationName?.toLowerCase().includes(i)??!1)||(e.serialNumber?.toLowerCase().includes(i)??!1)||(e.approachRoad?.toLowerCase().includes(i)??!1),r=!this.selectedLocation||e.locationName===this.selectedLocation,c=!this.selectedType||e.deviceType===this.selectedType,O=!this.selectedStatus||e.status===this.selectedStatus;return a&&r&&c&&O}),this.pageIndex=0,this.updatePaginatedItems()}updatePaginatedItems(){let i=this.pageIndex*this.pageSize,e=i+this.pageSize;this.paginatedItems=this.filteredItems.slice(i,e)}get locations(){let i=this.items.map(e=>e.locationName).filter(e=>!!(e&&e.trim()));return Array.from(new Set(i)).sort()}edit(i){i&&this.router.navigate(["/admin/items",i,"edit"])}viewHistory(i){i&&this.router.navigate(["/devices",i,"history"])}getActiveDevicesCount(){return this.items.filter(i=>i.status?.toLowerCase()==="active"||i.status?.toLowerCase()==="installed").length}getPolesCount(){return this.items.filter(i=>i.poles).length}getECBCount(){return this.items.filter(i=>i.ecbPresent).length}static \u0275fac=function(e){return new(e||t)(R(Xe),R(be),R(ye))};static \u0275cmp=w({type:t,selectors:[["app-inventory-list"]],decls:65,vars:14,consts:[["noCoords",""],[1,"page-container"],["class","summary-cards",4,"ngIf"],[1,"inventory-card","mat-elevation-z4"],[1,"filters-container"],[1,"filters"],["appearance","fill",1,"filter-field"],["matInput","","placeholder","Search location or serial",3,"ngModelChange","input","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value","",1,"options-select"],["class","options-select",3,"value",4,"ngFor","ngForOf"],["mat-raised-button","",1,"reset-btn",3,"click"],[1,"table-full-container"],["mat-table","",1,"full-width-table",3,"dataSource"],["matColumnDef","locationName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","serialNumber"],["matColumnDef","deviceType"],["matColumnDef","status"],["matColumnDef","poles"],["matColumnDef","ecbPresent"],["matColumnDef","approachRoad"],["matColumnDef","coordinates"],["mat-cell","","class","coordinates-cell",4,"matCellDef"],["matColumnDef","actions",4,"ngIf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","no-items",4,"ngIf"],["showFirstLastButtons","","class","paginator",3,"length","pageSize","pageIndex","pageSizeOptions","page",4,"ngIf"],[1,"summary-cards"],[1,"summary-card","total-card"],[1,"summary-content"],[1,"summary-icon"],[1,"summary-text"],[1,"summary-number"],[1,"summary-label"],[1,"summary-card","active-card"],[1,"summary-card","poles-card"],[1,"summary-card","ecb-card"],[1,"options-select",3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"coordinates-cell"],[4,"ngIf","ngIfElse"],[1,"no-data"],["matColumnDef","actions"],["mat-icon-button","","color","accent","matTooltip","Edit",3,"click"],["mat-icon-button","","color","primary","matTooltip","View History",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-items"],["showFirstLastButtons","",1,"paginator",3,"page","length","pageSize","pageIndex","pageSizeOptions"]],template:function(e,a){e&1&&(n(0,"div",1),d(1,ft,41,4,"div",2),n(2,"mat-card",3)(3,"h2"),l(4,"Device Inventory"),o(),n(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),l(9,"Search"),o(),n(10,"input",7),E("ngModelChange",function(c){return A(a.query,c)||(a.query=c),c}),u("input",function(){return a.onFilterChange()}),o()(),n(11,"mat-form-field",6)(12,"mat-label"),l(13,"Location"),o(),n(14,"mat-select",8),E("ngModelChange",function(c){return A(a.selectedLocation,c)||(a.selectedLocation=c),c}),u("selectionChange",function(){return a.onFilterChange()}),n(15,"mat-option",9),l(16,"All Locations"),o(),d(17,vt,2,2,"mat-option",10),o()(),n(18,"mat-form-field",6)(19,"mat-label"),l(20,"Device Type"),o(),n(21,"mat-select",8),E("ngModelChange",function(c){return A(a.selectedType,c)||(a.selectedType=c),c}),u("selectionChange",function(){return a.onFilterChange()}),n(22,"mat-option",9),l(23,"All Types"),o(),d(24,bt,2,2,"mat-option",10),o()(),n(25,"mat-form-field",6)(26,"mat-label"),l(27,"Status"),o(),n(28,"mat-select",8),E("ngModelChange",function(c){return A(a.selectedStatus,c)||(a.selectedStatus=c),c}),u("selectionChange",function(){return a.onFilterChange()}),n(29,"mat-option",9),l(30,"All Status"),o(),d(31,yt,2,2,"mat-option",10),o()(),n(32,"button",11),u("click",function(){return a.resetFilters()}),l(33," Reset Filters "),o()()(),n(34,"div",12)(35,"table",13),_(36,14),d(37,Ct,2,0,"th",15)(38,St,2,1,"td",16),f(),_(39,17),d(40,xt,2,0,"th",15)(41,Ot,2,1,"td",16),f(),_(42,18),d(43,It,2,0,"th",15)(44,Pt,2,1,"td",16),f(),_(45,19),d(46,Mt,2,0,"th",15)(47,wt,3,3,"td",16),f(),_(48,20),d(49,Tt,2,0,"th",15)(50,At,2,1,"td",16),f(),_(51,21),d(52,Et,2,0,"th",15)(53,Lt,2,1,"td",16),f(),_(54,22),d(55,kt,2,0,"th",15)(56,Dt,2,1,"td",16),f(),_(57,23),d(58,zt,2,0,"th",15)(59,Bt,4,2,"td",24),f(),d(60,Wt,3,0,"ng-container",25)(61,Ht,1,0,"tr",26)(62,jt,1,0,"tr",27),o(),d(63,Gt,2,1,"div",28),o(),d(64,Yt,1,5,"mat-paginator",29),o()()),e&2&&(s(),p("ngIf",a.items.length>0),s(9),T("ngModel",a.query),s(4),T("ngModel",a.selectedLocation),s(3),p("ngForOf",a.locations),s(4),T("ngModel",a.selectedType),s(3),p("ngForOf",a.deviceTypes),s(4),T("ngModel",a.selectedStatus),s(3),p("ngForOf",a.statuses),s(4),p("dataSource",a.paginatedItems),s(25),p("ngIf",a.isAdmin),s(),p("matHeaderRowDef",a.displayedColumns),s(),p("matRowDefColumns",a.displayedColumns),s(),p("ngIf",a.filteredItems.length===0),s(),p("ngIf",a.filteredItems.length>0))},dependencies:[ve,he,_e,Oe,Ce,Se,xe,qe,Fe,Be,He,Ne,Re,je,Ve,We,Ge,Ye,Le,Ee,V,Te,Y,G,j,H,ke,W,Ae,Ue,Ke,we,Pe,Me,Je,D,et,te,fe],styles:[".page-container[_ngcontent-%COMP%]{width:100%;padding:20px;background:#f5f5f5;min-height:100vh;box-sizing:border-box}.inventory-card[_ngcontent-%COMP%]{padding:20px;width:100%;border-radius:8px;box-sizing:border-box}.summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:24px}.summary-card[_ngcontent-%COMP%]{border-radius:8px;transition:transform .2s ease}.summary-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.summary-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.options-select[_ngcontent-%COMP%]{text-color:#6610f2;font-weight:500;background-color:#f8f9fa!important}.summary-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.summary-text[_ngcontent-%COMP%]{display:flex;flex-direction:column}.summary-number[_ngcontent-%COMP%]{font-size:24px;font-weight:700;line-height:1}.summary-label[_ngcontent-%COMP%]{font-size:14px;color:#f0f0f0}.total-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2196f3,#1976d2);color:#fff}.active-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4caf50,#388e3c);color:#fff}.poles-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff9800,#f57c00);color:#fff}.ecb-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9c27b0,#7b1fa2);color:#fff}h2[_ngcontent-%COMP%]{margin-bottom:20px;font-weight:600;color:#3f51b5;text-align:center}.filters-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;margin-bottom:20px;border:1px solid #e0e0e0;box-shadow:0 2px 4px #0000001a}.filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;align-items:center}.filter-field[_ngcontent-%COMP%]{min-width:200px;flex:1}  .filters-container .mat-form-field-appearance-fill .mat-form-field-flex{background-color:#f5f5f5!important;border-radius:4px!important;border:1px solid #e0e0e0!important}  .filters-container .mat-form-field-appearance-fill .mat-form-field-underline{display:none!important}  .filters-container .mat-select-value{background-color:#f5f5f5!important}  .filters-container .mat-form-field-infix{background-color:#f5f5f5!important}  .filters-container input{background-color:#f5f5f5!important}  .mat-select-panel{background:#fff!important;border:2px solid #ccc!important}  .mat-option{background:#fff!important}  .mat-option:hover:not(.mat-option-disabled){background:#f0f0f0!important}  .mat-option.mat-selected{background:#e3f2fd!important;color:#1976d2!important}.reset-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef5350,#e53935);color:#fff;font-weight:600;border-radius:8px;padding:0 16px;display:flex;align-items:center;gap:6px;height:48px;transition:all .3s ease;box-shadow:0 3px 8px #f4433640;white-space:nowrap;margin-top:4px}.reset-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);background:linear-gradient(135deg,#e53935,#d32f2f)}.table-full-container[_ngcontent-%COMP%]{width:100%;max-height:600px;overflow-y:auto;overflow-x:auto;border-radius:8px;background:#fff;border:1px solid #e0e0e0;margin-bottom:16px}.full-width-table[_ngcontent-%COMP%]{width:100%;min-width:100%;border-spacing:0;border-collapse:collapse}th.mat-header-cell[_ngcontent-%COMP%]{position:sticky;top:0;background:#5687b8;font-weight:600;font-size:14px;color:#fff;text-transform:uppercase;border-bottom:2px solid #e0e0e0;z-index:1;padding:12px 8px;white-space:nowrap}td.mat-cell[_ngcontent-%COMP%]{font-size:14px;color:#333;border-bottom:1px solid #eaeaea;padding:12px 8px;white-space:nowrap}tr[_ngcontent-%COMP%]:hover{background-color:#e3f2fd;transition:background-color .2s ease}.no-items[_ngcontent-%COMP%]{text-align:center;color:#777;padding:40px 20px;font-size:16px}.status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500;text-transform:capitalize}.status-active[_ngcontent-%COMP%], .status-installed[_ngcontent-%COMP%]{background:#e8f5e8;color:#2e7d32}.status-inactive[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.status-maintenance[_ngcontent-%COMP%]{background:#fff3e0;color:#ef6c00}.status-unknown[_ngcontent-%COMP%]{background:#f5f5f5;color:#666}.paginator[_ngcontent-%COMP%]{border-radius:8px;background:#fafafa;border:1px solid #e0e0e0;width:100%}@media (max-width: 768px){.page-container[_ngcontent-%COMP%]{padding:15px}.summary-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.filters[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filter-field[_ngcontent-%COMP%]{min-width:auto;width:100%}.reset-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}th.mat-header-cell[_ngcontent-%COMP%], td.mat-cell[_ngcontent-%COMP%]{padding:8px 4px;font-size:12px}}@media (max-width: 480px){.summary-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}.table-full-container[_ngcontent-%COMP%]{max-height:500px}}"]})};export{tt as InventoryListComponent};

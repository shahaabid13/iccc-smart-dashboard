import{a as K}from"./chunk-BJTGZIUF.js";import"./chunk-XT2DNTKZ.js";import"./chunk-D5LRABMA.js";import{a as X,b as Z,c as U,d as q}from"./chunk-CIT4JVC4.js";import{b as B}from"./chunk-QZJLICHW.js";import{a as V}from"./chunk-SWU2EWNA.js";import"./chunk-GG7DK3VL.js";import{i as j,m as R,n as z,p as H}from"./chunk-457EALQY.js";import{a as G,b as J}from"./chunk-QNMHJO7J.js";import{a as F,f as k,g as N,k as L}from"./chunk-WAO5ROTU.js";import{S as A,T as W}from"./chunk-I7RDOML2.js";import{g as P,j as D,t as T}from"./chunk-NJBGEMB6.js";import{$ as x,$a as d,Bb as S,Cc as I,Dc as w,Hc as E,Ia as l,Mb as _,Nc as O,Pb as i,Qa as h,Qb as p,Rb as b,Ub as s,Vb as v,Wa as M,Wb as f,X as y,nb as c,ob as e,pb as t,zb as C}from"./chunk-HNXX6TOF.js";import"./chunk-FDERIQAA.js";var g=class r{constructor(n){this.api=n}getAll(){return this.api.get("/locations")}searchByName(n){return this.api.get("/locations/search",{name:n})}static \u0275fac=function(o){return new(o||r)(x(K))};static \u0275prov=y({token:r,factory:r.\u0275fac,providedIn:"root"})};function ee(r,n){if(r&1&&(e(0,"mat-option",17),i(1),t()),r&2){let o=n.$implicit;c("value",o.name),l(),b(" ",o.name," ")}}function te(r,n){r&1&&(e(0,"mat-icon"),i(1,"search"),t())}function ie(r,n){r&1&&(e(0,"mat-icon",18),i(1,"autorenew"),t())}function ne(r,n){if(r&1&&(e(0,"div",24)(1,"div",25),i(2),t(),e(3,"div",25),i(4),t(),e(5,"div",25),i(6),t(),e(7,"div",25),i(8),t(),e(9,"div",25),i(10),t()()),r&2){let o=n.$implicit,a=S(2);_("grid-template-columns",a.gridTemplate),l(2),p(o.name),l(2),p(o.serialNumber),l(2),p(o.deviceType),l(2),p(o.locationName||o.location),l(2),p(o.status)}}function oe(r,n){if(r&1&&(e(0,"div",19)(1,"div",20)(2,"div",21),i(3,"Name"),t(),e(4,"div",21),i(5,"Serial No."),t(),e(6,"div",21),i(7,"Type"),t(),e(8,"div",21),i(9,"Location"),t(),e(10,"div",21),i(11,"Status"),t()(),e(12,"cdk-virtual-scroll-viewport",22),d(13,ne,11,7,"div",23),t()()),r&2){let o=S();l(),_("grid-template-columns",o.gridTemplate),l(12),c("cdkVirtualForOf",o.items)("cdkVirtualForTrackBy",o.trackById)}}function ae(r,n){r&1&&(e(0,"p",26),i(1," No devices found. "),t())}var Q=class r{constructor(n,o){this.http=n;this.locSvc=o}items=[];locations=[];location="";type="";status="";loading=!1;columns=[200,160,120,180,120];get gridTemplate(){return this.columns.map(n=>`${n}px`).join(" ")}ngOnInit(){this.locSvc.getAll().subscribe(n=>this.locations=n||[])}search(){this.loading=!0;let n=new URLSearchParams;this.location&&n.append("location",this.location),this.type&&n.append("type",this.type),this.status&&n.append("status",this.status);let o=`http://localhost:8080/api/devices/search?${n.toString()}`;this.http.get(o).subscribe({next:a=>{this.items=a||[],this.loading=!1},error:a=>{console.error("Error fetching devices:",a),this.loading=!1}})}trackById(n,o){return o.id??n}static \u0275fac=function(o){return new(o||r)(h(O),h(g))};static \u0275cmp=M({type:r,selectors:[["app-device-search"]],decls:41,vars:9,consts:[[1,"inventory-card"],[1,"filters"],["appearance","outline",1,"filter-field"],[3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","ANPR"],["value","RLVD"],["value","PTZ"],["value","FIXED"],["value","installed"],["value","missing"],["mat-raised-button","","color","primary",3,"click","disabled"],[4,"ngIf"],["class","spinner",4,"ngIf"],["class","virt-table mat-elevation-z8",4,"ngIf"],["class","no-items",4,"ngIf"],[3,"value"],[1,"spinner"],[1,"virt-table","mat-elevation-z8"],[1,"virt-header"],[1,"virt-head-cell"],["itemSize","56",1,"virt-viewport"],["class","virt-row",3,"gridTemplateColumns",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[1,"virt-row"],[1,"virt-cell"],[1,"no-items"]],template:function(o,a){o&1&&(e(0,"mat-card",0)(1,"h2"),i(2,"Device Search"),t(),e(3,"div",1)(4,"mat-form-field",2)(5,"mat-label"),i(6,"Location"),t(),e(7,"mat-select",3),f("ngModelChange",function(m){return v(a.location,m)||(a.location=m),m}),e(8,"mat-option",4),i(9,"Select location"),t(),d(10,ee,2,2,"mat-option",5),t()(),e(11,"mat-form-field",2)(12,"mat-label"),i(13,"Type"),t(),e(14,"mat-select",3),f("ngModelChange",function(m){return v(a.type,m)||(a.type=m),m}),e(15,"mat-option",4),i(16,"Any"),t(),e(17,"mat-option",6),i(18,"ANPR"),t(),e(19,"mat-option",7),i(20,"RLVD"),t(),e(21,"mat-option",8),i(22,"PTZ"),t(),e(23,"mat-option",9),i(24,"FIXED"),t()()(),e(25,"mat-form-field",2)(26,"mat-label"),i(27,"Status"),t(),e(28,"mat-select",3),f("ngModelChange",function(m){return v(a.status,m)||(a.status=m),m}),e(29,"mat-option",4),i(30,"Any"),t(),e(31,"mat-option",10),i(32,"Installed"),t(),e(33,"mat-option",11),i(34,"Missing"),t()()(),e(35,"button",12),C("click",function(){return a.search()}),d(36,te,2,0,"mat-icon",13)(37,ie,2,0,"mat-icon",14),i(38," Search "),t()(),d(39,oe,14,4,"div",15)(40,ae,2,0,"p",16),t()),o&2&&(l(7),s("ngModel",a.location),l(3),c("ngForOf",a.locations),l(4),s("ngModel",a.type),l(14),s("ngModel",a.status),l(7),c("disabled",a.loading),l(),c("ngIf",!a.loading),l(),c("ngIf",a.loading),l(2),c("ngIf",a.items.length>0),l(),c("ngIf",!a.loading&&a.items.length===0))},dependencies:[E,I,w,T,P,D,H,j,z,R,V,L,N,q,U,X,B,W,A,k,F,J,G,Z],styles:[".inventory-card[_ngcontent-%COMP%]{max-width:900px;margin:40px auto;padding:24px;border-radius:12px;box-shadow:0 6px 16px #0000001a}h2[_ngcontent-%COMP%]{text-align:center;font-weight:600;color:#1565c0;margin-bottom:24px}.filters[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap;align-items:center;justify-content:center;margin-bottom:20px}.filter-field[_ngcontent-%COMP%]{width:220px}button[_ngcontent-%COMP%]{height:56px;min-width:140px;font-weight:600}.spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.virt-table[_ngcontent-%COMP%]{margin-top:12px}.virt-header[_ngcontent-%COMP%], .virt-row[_ngcontent-%COMP%]{display:grid;align-items:center;padding:8px 12px}.virt-header[_ngcontent-%COMP%]{font-weight:600;background:#f1f3f6;border-bottom:2px solid #ddd}.virt-row[_ngcontent-%COMP%]{border-bottom:1px solid #eee}.virt-cell[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.virt-viewport[_ngcontent-%COMP%]{height:320px}.no-items[_ngcontent-%COMP%]{text-align:center;color:#777;font-style:italic;margin-top:20px}"]})};export{Q as DeviceSearchComponent};
